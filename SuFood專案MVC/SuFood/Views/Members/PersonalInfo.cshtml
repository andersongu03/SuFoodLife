@section Styles{

	<link href="~/css/usermanagement.css" rel="stylesheet" />
	<style>
		h3 {
			padding-bottom: 8%;
			margin-top: -10%;
			font-weight: bold;
			color: #555555;
		}

		.btn-block {
			margin-top: 5%;
		}


		.info-label {
			padding-right: 0px;
			padding:5px;
			width: fit-content;
		}

		.info-label2 {
			padding-right: 0;
			padding:5px;
			width: 15%;
		}

		.info-label3 {
			/*margin-left: 30px;*/
			padding:5px;
		}

		.info-label4 {
			/*margin-left: 16px;*/
			padding:5px;
		}

		input{
			padding:5px;
		}

		#editinfo-button{
			margin-top:25px;
		}



		/*.personalInfo {
			max-width: 360px;
			background-color: #fff;
			width: 100%;
			padding: 30px;
			border-radius: 8px;
			display: flex;
			flex-direction: column;
			flex-wrap: wrap;
			align-items: center;
			box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
		}*/

	</style>

}


<section class="user__management section align-items-center section-bg" id="user__management">
	<div class="user__management-container container  row">
		<partial name="_SidebarPartial" />


		<div class="col-10 user__management-content">
			<!-- 內容 -->
			<div class="col-6 personalInfo-container" id="main">
				<div class="profile">
					<h3>個人資料</h3>
				</div>


				<div class="form row">
					<div class="col-3 info-label">
						<label for="accountId">會員編號：</label>
					</div>
					<div class="col-9">
						<input type="text" name="accountId" id="accountId" v-model="info.accountId" disabled size="30">
					</div>
				</div>
				<div class="form row">
					<div class="col-3 info-label">
						<label for="account1">會員帳號：</label>
					</div>
					<div class="col-9">
						<input type="text" name="account1" id="account1" v-model="info.account1" disabled size="30">
					</div>
				</div>

				@*<div class="container personalInfo" id="personal">
				<table class="table">
				<tbody>
				<!--編輯範本-->
				<template v-if="infoEdit">
				<tr>
				<th scope="col">帳號</th>
				<td>
				a0970552678@gmail.com
				</td>
				</tr>
				<tr>
				<th scope="col">姓名</th>
				<td>
				毛毛蟲
				</td>
				</tr>
				<tr>
				<th scope="col">年齡</th>
				<td>
				22
				</td>
				</tr>
				<tr>
				<th scope="col">地址</th>
				<td>
				台北市大安區羅斯福路
				</td>
				</tr>
				<tr>
				<th scope="col">性別</th>
				<td>
				男
				</td>
				</tr>
				<div class="btn-block">
				<button class="btn btn-primary" @@click="update(info.accountId)">儲存</button>
				<button class="btn btn-secondary" @@click="cancel(info.accountId)">取消</button>
				</div>
				</template>

				<!--顯示範本-->
				<template v-else>
				<tr>
				<th scope="col">帳號</th>
				<td>
				a0970552678@gmail.com
				</td>
				</tr>
				<tr>
				<th scope="col">姓名</th>
				<td>
				毛毛蟲
				</td>
				</tr>
				<tr>
				<th scope="col">年齡</th>
				<td>
				22
				</td>
				</tr>
				<tr>
				<th scope="col">地址</th>
				<td>
				台北市大安區羅斯福路
				</td>
				</tr>
				<tr>
				<th scope="col">性別</th>
				<td>
				男
				</td>
				</tr>
				<div>
				<button class="btn btn-primary" @@click="edit">編輯</button>
				</div>
				</template>
				</tbody>
				</table>
				</div>*@

				<!--編輯範本-->
				<template v-if="infoEdit">

					<div class="form row">
						<div class="col-3 info-label">
							<label for="">會員姓名：</label>
						</div>
						<div class="col-9">
							<input class="Error" type="text" name="firstname" id="firstname" v-model="info.firstName" required size="30">
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label2">
							<label for="gender" class="info-label3">性別：</label>
						</div>
						<div class="col-9">
							<input type="radio" name="gender" id="gender" value="男" v-model="info.gender">男
							<input type="radio" name="gender" id="gender" value="女" v-model="info.gender">女
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label2">
							<label for="birthdate" class="info-label3">生日：</label>
						</div>
						<div class="col-9">
							<input type="date" name="birthdate" id="birthdate" v-model="info.birthDate">
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label">
							<label for="phone">手機號碼：</label>
						</div>
						<div class="col-9">
							<input type="tel" class="error" name="phone" id="phone" v-model="info.phone" required size="30">
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label">
							<label for="">聯絡地址：</label>
						</div>
						<div class="col-9">
							<input type="text" name="" id="" required size="30" v-model="info.defaultShipAddress">
						</div>
					</div>
					<div class="btn-block">
						<button class="btn btn-primary" @@click="update(info.accountId)">儲存</button>
						<button class="btn btn-secondary" @@click="cancel(info.accountId)">取消</button>
					</div>
				</template>

				<!--顯示範本-->
				<template v-else>

					<div class="form row">
						<div class="col-3 info-label">
							<div>會員姓名：</div>
						</div>
						<div class="col-9">
							<div>{{info.firstName}}</div>
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label2">
							<div class="info-label3">性別：</div>
						</div>
						<div class="col-9">
							<div>{{info.gender}}</div>
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label2">
							<div class="info-label3">生日：</div>
						</div>
						<div class="col-9">
							<div>{{info.birthDate}}</div>
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label">
							<div>手機號碼：</div>
						</div>
						<div class="col-9">
							<div>{{info.phone}}</div>
						</div>
					</div>
					<div class="form row">
						<div class="col-3 info-label">
							<div>聯絡地址：</div>
						</div>
						<div class="col-9">
							<div>{{info.defaultShipAddress}}</div>
						</div>
					</div>
					<div>
						<button class="btn btn-primary" id="editinfo-button" @@click="edit">編輯</button>
					</div>
				</template>

			</div>
		</div>
	</div>
</section>


@section Scripts
	{
	<script src="~/js/vue.js"></script>
	<script src="~/axios/axios.min.js"></script>
	<script>

		const vm = new Vue({
			el: "#main",
			data: {
				info: [],
				infoEdit: false,

			},
			mounted() {
				this.getInfos();
			},
			methods: {
				getInfos: function () {
					let _this = this;
					axios.get(`/PersonalInfo/GetAccount`,).then(res => {
						_this.info = res.data[0];
					})
				},
				edit: function () {
					let _this = this;
					this.infoEdit = true;
					_this.oldfirstName = this.info.firstName;
					_this.oldbirthdate = this.info.birthDate;
					_this.oldgender = this.info.gender;
					_this.oldphone = this.info.phone;
					_this.olddefaultshipaddress = this.info.defaultShipAddress;
				},
				cancel: function () {
					let _this = this;
					this.infoEdit = false;
					this.info.firstName = _this.oldfirstName;
					this.info.birthDate = _this.oldbirthdate;
					this.info.gender = _this.oldgender;
					this.info.phone = _this.oldphone;
					this.info.defaultShipAddress = _this.olddefaultshipaddress;
				},
				update: function () {
					let _this = this;
					var request = {
						AccountId: this.info.accountId,
						FirstName: this.info.firstName,
						BirthDate: this.info.birthDate,
						Gender: this.info.gender,
						Phone: this.info.phone,
						Defaultshipaddress: this.info.defaultShipAddress,
					};
					axios.post(`/PersonalInfo/EditAccount/${_this.info.accountId}`, request)
						.then(res => {
							//alert(res.data); //update成功
							_this.getInfos();
							this.infoEdit = false;
						})
				},
			},
			computed: {

			}
		})

	</script>

}
